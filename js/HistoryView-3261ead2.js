import{ref as p,onMounted as D,resolveComponent as a,openBlock as o,createElementBlock as l,createVNode as y,createElementVNode as t,createBlock as i,Fragment as H,renderList as N,unref as d,withCtx as c,createTextVNode as m,createCommentVNode as g,toDisplayString as u}from"vue";import{u as B}from"./index-cbb8e2e1.js";import{_ as R,f as $,g as E,c as M,d as T,i as F}from"./_plugin-vue_export-helper-24d3f7a4.js";const I={class:"history"},L={class:"page-content"},P={key:0,class:"loading-wrapper"},S={key:2,class:"card-list"},j={class:"card-data"},q={class:"data-item"},z={class:"value"},A={class:"data-item"},G={class:"value"},J={class:"data-item"},K={class:"value"},O={__name:"HistoryView",setup(Q){const k=B(),_=p(!0),n=p(""),v=p([]);async function w(){try{_.value=!0,n.value="",v.value=await F()}catch(r){n.value="数据加载失败，请稍后重试",console.error("获取历史数据失败:",r)}finally{_.value=!1}}function V(r){k.push(`/detail/${r}`)}return D(()=>{w()}),(r,e)=>{const b=a("van-nav-bar"),h=a("van-loading"),x=a("van-empty"),f=a("van-tag"),C=a("van-card");return o(),l("div",I,[y(b,{title:"历史数据"}),t("div",L,[_.value?(o(),l("div",P,[y(h,{type:"spinner",color:"#1989fa"}),e[0]||(e[0]=t("p",null,"加载中...",-1))])):n.value?(o(),i(x,{key:1,image:"error",description:n.value},null,8,["description"])):(o(),l("div",S,[(o(!0),l(H,null,N(v.value,s=>(o(),i(C,{key:s.record_id,desc:d($)(s.fields.开播日期),title:`直播数据 - ${s.fields.周几}`,onClick:U=>V(s.record_id)},{tags:c(()=>[s.fields.是否为大促?(o(),i(f,{key:0,plain:"",type:"primary"},{default:c(()=>e[1]||(e[1]=[m("大促")])),_:1})):g("",!0),s.fields.是否为节假日?(o(),i(f,{key:1,plain:"",type:"warning"},{default:c(()=>e[2]||(e[2]=[m("节假日")])),_:1})):g("",!0)]),bottom:c(()=>[t("div",j,[t("div",q,[e[3]||(e[3]=t("span",{class:"label"},"成交金额",-1)),t("span",z,u(d(E)(s.fields.直播间成交金额)),1)]),t("div",A,[e[4]||(e[4]=t("span",{class:"label"},"观看人数",-1)),t("span",G,u(d(M)(s.fields.直播间观看人数)),1)]),t("div",J,[e[5]||(e[5]=t("span",{class:"label"},"成交转化",-1)),t("span",K,u(d(T)(s.fields["点击成交转化率(次数)"])),1)])])]),_:2},1032,["desc","title","onClick"]))),128))]))])])}}},Z=R(O,[["__scopeId","data-v-f8539001"]]);export{Z as default};
